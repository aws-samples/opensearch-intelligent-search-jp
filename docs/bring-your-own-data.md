# 独自データで試すには

このドキュメントでは、ご自身のデータを用いてデモアプリケーションを動かすために必要な手順を説明します。

## 前提: サンプルアセットの構成

opensearch-intelligent-search-jp では、リポジトリルートにある `docs.zip` を読み込み OpenSearch インデックスに取り込みを行います。
`docs.zip` は、以下のようなフォルダ・ファイル構成をzip化したファイルです。

```
.
├── bedrock
│   ├── xxxxx.txt
│   ├── ...
│   └── xxxxx.txt
├── comprehend
│   ├── xxxxx.txt
│   ├── ...
│   ├── xxxxx.txt
└── kendra
    ├── xxxxx.txt
    ├── ...
    ├── xxxxx.txt
```

opensearch-intelligent-search-jp を `cdk deploy` でデプロイすると、`docs.zip` をドキュメント保存用バケット (以下、「ドキュメントバケット」) へ展開してアップロードします。ドキュメントバケットは、`cdk deploy` 実行時の出力に含まれる `S3bucketdocumentBucketName` から確認可能です。

ドキュメントバケットには、上記のフォルダ構造がそのまま反映される形でデータがアップロードされます。
`bedrock` や `comprehend` といったフォルダ名が、OpenSearch のマッピングにおける `service` というフィールドに対応します。(このサンプルデータでは、AWS のサービス名に対応するため)

各フォルダには、txtファイルが格納されています。ここでは、それぞれのサービスのドキュメントをtxtファイルに変換したデータを格納しています。

## 自身のデータで試すには

コードを変更せずに自身のデータで試す場合、以下の手順を実施してください。

- サンプルデータと同様のデータ構成でドキュメントバケットにデータをアップロードする。
- [README内にある「デプロイ」セクションの 3. サンプルデータ投入](./../README.md#3-サンプルデータ投入) の手順を実施する。
  - 必要に応じてインデックス名を適宜変更して実施してください。
